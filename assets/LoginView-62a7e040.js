import{a7 as B,a8 as C,a9 as I,x as F,aa as L,ab as M,ac as N,ad as r,ai as U,c as s,ae as a,af as $,ag as m,av as d,J as q,ah as P,at as T,au as A}from"./index-2e906d0c.js";import{u as D,a as f}from"./vee-validate.esm-018bef8b.js";import{c as J,a as _,V as R}from"./index.esm-de8aadb6.js";import{V as j}from"./VContainer-451776cb.js";import{V as z}from"./VDivider-bdd82a0d.js";import{V as g}from"./VCol-dc2434c8.js";const v=n=>(T("data-v-9e4c9d7f"),n=n(),A(),n),E=v(()=>d("h1",null,"登入",-1)),G={class:"link"},H=v(()=>d("a",{href:"#/register"},"還不是會員嗎?",-1)),K={__name:"LoginView",setup(n){const V=C(),p=I(),{api:b}=U(),l=F(!1),h=L(),w=J({account:_().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),password:_().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符")}),{handleSubmit:x,isSubmitting:y}=D({validationSchema:w}),i=f("account"),c=f("password"),S=x(async u=>{var e,o;try{const{data:t}=await b.post("/users/login",{account:u.account,password:u.password});h.login(t.result),p({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),V.push("/")}catch(t){console.log(t);const k=((o=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";p({text:k,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(u,e)=>(M(),N(j,{style:{"background-color":"white","border-radius":"36px","margin-top":"50px"}},{default:r(()=>[s(g,{cols:"12"},{default:r(()=>[E,s(z)]),_:1}),s(g,{cols:"12"},{default:r(()=>[s(R,{disabled:a(y),onSubmit:$(a(S),["prevent"])},{default:r(()=>[s(m,{label:"帳號",minlength:"4",maxlength:"20",counter:"","prepend-inner-icon":"mdi-account",modelValue:a(i).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(i).value.value=o),"error-messages":a(i).errorMessage.value},null,8,["modelValue","error-messages"]),s(m,{label:"密碼",type:l.value?"text":"password","append-inner-icon":l.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":e[1]||(e[1]=o=>l.value=!l.value),minlength:"4",maxlength:"20",counter:"","prepend-inner-icon":"mdi-lock",modelValue:a(c).value.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a(c).value.value=o),"error-messages":a(c).errorMessage.value},null,8,["type","append-inner-icon","modelValue","error-messages"]),d("div",G,[s(q,{type:"submit",color:"green"},{default:r(()=>[P("登入")]),_:1}),H])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1}))}},ee=B(K,[["__scopeId","data-v-9e4c9d7f"]]);export{ee as default};
