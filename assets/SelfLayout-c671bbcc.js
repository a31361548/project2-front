import{a8 as V,a9 as k,aa as h,o as g,ak as w,ab as l,al as p,c as t,ad as s,a0 as m,ae as c,an as y,ac as C,am as B,ai as L}from"./index-2e906d0c.js";import{V as A,a as N}from"./VNavigationDrawer-9b98cb0d.js";import{b as d,V as i}from"./VList-5a36ea62.js";import{V as R}from"./VDivider-bdd82a0d.js";const F={__name:"SelfLayout",setup(S){const f=V(),u=k(),{apiAuth:v}=L(),a=h(),_=[{to:"/self/article",text:"文章管理",icon:"mdi-list-box"},{to:"/self/favorite",text:"收藏",icon:"mdi-heart"},{to:"/",text:"回首頁",icon:"mdi-home"}],b=g(()=>a.avatar),x=async()=>{var n,r;try{await v.delete("/users/logout"),a.logout(),u({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),f.push("/")}catch(o){const e=((r=(n=o==null?void 0:o.response)==null?void 0:n.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";u({text:e,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(n,r)=>{const o=w("RouterView");return l(),p(m,null,[t(A,{"expand-on-hover":"",rail:"","mobile-breakpoint":"xs"},{default:s(()=>[t(d,null,{default:s(()=>[t(i,{"prepend-avatar":b.value,title:c(a).account,subtitle:c(a).email,to:"/self"},null,8,["prepend-avatar","title","subtitle"])]),_:1}),t(R),t(d,{density:"compact",nav:""},{default:s(()=>[(l(),p(m,null,y(_,e=>t(i,{key:e.to,to:e.to,title:e.text,"prepend-icon":e.icon,value:e.to},null,8,["to","title","prepend-icon","value"])),64)),c(a).isLogin?(l(),C(i,{key:0,title:"登出","prepend-icon":"mdi-logout",onClick:x})):B("",!0)]),_:1})]),_:1}),t(N,null,{default:s(()=>[t(o)]),_:1})],64)}}};export{F as default};
